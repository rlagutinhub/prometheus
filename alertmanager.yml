global:
  resolve_timeout: 30m # –ß–µ—Ä–µ–∑ —Å–∫–æ–ª—å–∫–æ –≤—Ä–µ–º–µ–Ω–∏ –ø–æ—Å–ª–µ –∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏—è –∞–ª–µ—Ä—Ç–∞ –æ–Ω —Å—á–∏—Ç–∞–µ—Ç—Å—è —Ä–∞–∑—Ä–µ—à—ë–Ω–Ω—ã–º

route:
  group_by: ['alertname'] # –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –∞–ª–µ—Ä—Ç–æ–≤ –ø–æ alertname
  group_wait: 30s # –û–∂–∏–¥–∞–Ω–∏–µ –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –ø–µ—Ä–≤–æ–π –≥—Ä—É–ø–ø—ã –∞–ª–µ—Ä—Ç–æ–≤
  group_interval: 30m # –ò–Ω—Ç–µ—Ä–≤–∞–ª –º–µ–∂–¥—É –ø–æ–≤—Ç–æ—Ä–Ω—ã–º–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏
  receiver: default # –û—Å–Ω–æ–≤–Ω–æ–π –ø–æ–ª—É—á–∞—Ç–µ–ª—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

  routes:

    - receiver: 'telegram'
      group_wait: 30s
      match_re:
        severity: 'critical|warning'
      continue: true # –ê–ª–µ—Ä—Ç—ã –ø—Ä–æ–¥–æ–ª–∂–∞—Ç –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å—Å—è –≤ –¥—Ä—É–≥–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã

    # - receiver: 'mail'
    #   group_wait: 30s
    #   #  match_re:
    #   #    severity: 'critical'
    #   continue: true # –ê–ª–µ—Ä—Ç—ã –ø—Ä–æ–¥–æ–ª–∂–∞—Ç –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å—Å—è –≤ –¥—Ä—É–≥–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã

receivers:

  - name: 'default' # –û—Å–Ω–æ–≤–Ω–æ–π –ø–æ–ª—É—á–∞—Ç–µ–ª—å –∑–∞–≥–ª—É—à–∫–∞

  - name: 'telegram'
    telegram_configs:
      - bot_token: '7407392706:AAFuCDaTdBe_LVO-dsdBVkiw7Z3e5QzxvyA'
        api_url: 'https://api.telegram.org'
        chat_id: 471106208
        parse_mode: 'HTML'
        message: |
          {{ if eq .Status "firing" }}
          {{ if eq .CommonLabels.severity "critical" }}üî¥ *Alert:* {{ .CommonLabels.alertname }}
          {{ else if eq .CommonLabels.severity "warning" }}üü† *Alert:* {{ .CommonLabels.alertname }}
          {{ else }}‚ö™Ô∏è *Alert:* {{ .CommonLabels.alertname }}
          {{ end }}
          *Status:* üî• FIRING
          *Severity:* {{ if eq .CommonLabels.severity "critical" }}üî¥ **{{ .CommonLabels.severity | title }}**{{ else if eq .CommonLabels.severity "warning" }}üü† **{{ .CommonLabels.severity | title }}**{{ else }}‚ö™Ô∏è **{{ .CommonLabels.severity | title }}**{{ end }}
          {{ else if eq .Status "resolved" }}
          {{ if eq .CommonLabels.severity "critical" }}üü¢ *üöå TRANSPORT Alert:* {{ .CommonLabels.alertname }}
          {{ else if eq .CommonLabels.severity "warning" }}üü¢ *üöå TRANSPORT 
          Alert:* {{ .CommonLabels.alertname }}
          {{ else }}‚ö™Ô∏è *Alert:* {{ .CommonLabels.alertname }}
          {{ end }}
          *Status:* ‚úÖ RESOLVED
          *Severity:* {{ if eq .CommonLabels.severity "critical" }}üü¢ **{{ .CommonLabels.severity | title }}**{{ else if eq .CommonLabels.severity "warning" }}üü¢ **{{ .CommonLabels.severity | title }}**{{ else }}‚ö™Ô∏è **{{ .CommonLabels.severity | title }}**{{ end }}
          {{ end }}
          {{ range .Alerts }}
          *Instance:* {{ .Labels.instance }}
            - *Title:* {{ .Annotations.title }}
            - *Description:* {{ .Annotations.description }}
          {{ end }}
          {{ end }}

  # - name: 'mail'
  #   email_configs:
  #     - smarthost: mail.example.ru:25
  #       hello: mail.example.ru
  #       to: 'root@servers.ru'
  #       from: 'alert@example.ru'
  #       auth_username: 'alert@example.ru'
  #       auth_password: '123456'
  #       require_tls: true
